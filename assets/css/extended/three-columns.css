/* 三栏布局：仅在桌面端生效 */
@media (min-width: 1300px) {
    /* 三栏网格布局 */
    body:has(.three-column-layout) .main {
        max-width: 1500px !important;
        margin: 0 auto;
    }

    .three-column-layout {
        display: grid;
        grid-template-columns: 340px 1fr 280px; /* 左 240px | 中 自动 | 右 280px */
        grid-template-rows: auto; /* 明确行高度 */
        gap: 2rem;
        padding: 0 1rem;
        margin: 0 auto;
        align-items: start; /* 关键：防止拉伸 */
    }

    /* 左侧目录栏 */
    .three-column-layout .toc-sidebar {
        position: sticky;
        top: 2rem;
        height: fit-content;
        max-height: calc(100vh - 4rem);
    }

    .three-column-layout .toc-sidebar .toc {
        height: fit-content;
        max-height: calc(100vh - 4rem);
        overflow-y: auto;
        font-size: 0.95em;
        background-color: #fafafa;   /* 更柔和 */
        border-radius: 10px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        padding: 1em;
    }

    /* 中间正文区域 */
    .three-column-layout .post-content-wrapper {
        min-width: 0; /* 防止内容溢出 */
        line-height: 1.7;
        font-size: 1.05em;
    }

    /* 右侧最新文章栏 */
    .three-column-layout .recent-posts-sidebar {
        position: sticky;
        top: 2rem;
        height: fit-content;
        max-height: calc(100vh - 4rem);
        overflow-y: auto;
        font-size: 0.95em;
        border: 1px solid var(--border);
        background-color: #fafafa;   /* 更柔和 */
        border-radius: 10px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        padding: 1em;
    }    

    body.dark .three-column-layout .toc-sidebar .toc,
    body.dark .three-column-layout .recent-posts-sidebar {
        background-color: #1f1f1f;
        box-shadow: 0 2px 6px rgba(255,255,255,0.05);
    }


    .three-column-layout .recent-posts-sidebar h3 {
        margin-top: 0;
        margin-bottom: 1rem;
        font-size: 1.1em;
    }

    .three-column-layout .recent-posts-sidebar ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .three-column-layout .recent-posts-sidebar li {
        margin-bottom: 0.75rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid var(--border);
    }

    .three-column-layout .recent-posts-sidebar time {
        display: block;
        font-size: 0.85em;
        margin-top: 0.25rem;
    }
}

/* 平板及以下：恢复单栏 */
@media (max-width: 1299px) {
    .three-column-layout {
        display: block;
    }

    .toc-sidebar,
    .recent-posts-sidebar {
        display: none;
    }
}
