<!-- Mermaid CSS -->
<link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/mermaid@latest/dist/mermaid.min.css"
/>

<!-- Mermaid JS -->
<script>
    // 延迟初始化，确保 Hugo 内容已渲染
    window.addEventListener("load", function () {
        var script = document.createElement("script");
        script.src =
            "https://cdn.jsdelivr.net/npm/mermaid@latest/dist/mermaid.min.js";
        script.onload = function () {
            mermaid.initialize({
                startOnLoad: true,
                theme: "dark",
                securityLevel: "loose",
            });
            // 手动触发渲染，确保所有图表都被处理
            mermaid.init(undefined, ".language-mermaid");
        };
        document.head.appendChild(script);
    });
</script>
