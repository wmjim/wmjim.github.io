<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>博客备忘录 | Mengw&#39;s Blog</title>
<meta name="keywords" content="Hugo, Mermaid, KaTeX, Giscus, PaperMod">
<meta name="description" content="
 ：自定义字体
 ：添加评论系统 - Giscus
 ：双栏浮动布局
 ：LaTeX 数学公式支持
 ：Mermaid 作图支持

这篇文章主要用来记录博客系统在使用过程中的一些必要记录的东西。">
<meta name="author" content="mengw">
<link rel="canonical" href="http://localhost:1313/posts/%E5%8D%9A%E5%AE%A2%E5%A4%87%E5%BF%98%E5%BD%95/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.6eb1274a0d514e1d18a56e982c686e69a81c440ddc669ad00ce9c2698e25d5e1.css" integrity="sha256-brEnSg1RTh0YpW6YLGhuaagcRA3cZprQDOnCaY4l1eE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/images/avatar.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/posts/%E5%8D%9A%E5%AE%A2%E5%A4%87%E5%BF%98%E5%BD%95/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="http://localhost:1313/posts/%E5%8D%9A%E5%AE%A2%E5%A4%87%E5%BF%98%E5%BD%95/">
  <meta property="og:site_name" content="Mengw&#39;s Blog">
  <meta property="og:title" content="博客备忘录">
  <meta property="og:description" content=" ：自定义字体 ：添加评论系统 - Giscus ：双栏浮动布局 ：LaTeX 数学公式支持 ：Mermaid 作图支持 这篇文章主要用来记录博客系统在使用过程中的一些必要记录的东西。">
  <meta property="og:locale" content="zh-cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-10-17T16:22:19+08:00">
    <meta property="article:modified_time" content="2025-10-17T16:22:19+08:00">
    <meta property="article:tag" content="Hugo">
    <meta property="article:tag" content="Mermaid">
    <meta property="article:tag" content="KaTeX">
    <meta property="article:tag" content="Giscus">
    <meta property="article:tag" content="PaperMod">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="博客备忘录">
<meta name="twitter:description" content="
 ：自定义字体
 ：添加评论系统 - Giscus
 ：双栏浮动布局
 ：LaTeX 数学公式支持
 ：Mermaid 作图支持

这篇文章主要用来记录博客系统在使用过程中的一些必要记录的东西。">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "博客备忘录",
      "item": "http://localhost:1313/posts/%E5%8D%9A%E5%AE%A2%E5%A4%87%E5%BF%98%E5%BD%95/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "博客备忘录",
  "name": "博客备忘录",
  "description": " ：自定义字体 ：添加评论系统 - Giscus ：双栏浮动布局 ：LaTeX 数学公式支持 ：Mermaid 作图支持 这篇文章主要用来记录博客系统在使用过程中的一些必要记录的东西。\n",
  "keywords": [
    "Hugo", "Mermaid", "KaTeX", "Giscus", "PaperMod"
  ],
  "articleBody": " ：自定义字体 ：添加评论系统 - Giscus ：双栏浮动布局 ：LaTeX 数学公式支持 ：Mermaid 作图支持 这篇文章主要用来记录博客系统在使用过程中的一些必要记录的东西。\n核心框架：hugo 主题：PaperMod 功能测试 LaTex 测试 行内公式：$E = mc^2$\n块级公式： $$ \\int_a^b f(x),dx = F(b) - F(a) $$\nMermaid 测试 flowchart TD A[Christmas] --\u003e|Get money| B(Go shopping) B --\u003e C{Let me think} C --\u003e|One| D[Laptop] C --\u003e|Two| E[iPhone] C --\u003e|Three| F[fa:fa-car Car] 博客框架 一个标准的 Hugo 项目包含以下目录：\nmy-blog/ |—— archetypes/ # 用于新内容的模板 |—— assets/ # 全局资源 |—— contents/ # 组成站点内容的md文件和页面资源 |—— data/ # 用于增强内容、配置、本地化和导航的数据文件 |—— i18n/ # 多语言站点的翻译表 |—— layouts/ # 自定义页面布局 |—— public/ # Hugo 构建输出的静态文件（部署用） |—— resource/ # |—— statics/ # 存放静态资源（图片、favicon、CSS） |—— themes/ # 主题目录 |—— hugo.toml # 站点配置文件 Hugo 项目骨架详释 常用命令 # 生成一篇新文章 hugo new posts/标题.md # 启动 Hugo 的开发服务器以查看网站 hugo server -D # 构建站点，将文件发布到 public 目录 hugo 自定义字体 字体控制策略 文章正文与标题： 中文字体：PingFang SC 英文字体：Source Serif Pro 代码（行内 \u0026 块级）： 中文字体：PingFang SC 英文字体：Maple Mono 网站其它内容（导航、侧边栏等）： 中文字体：PingFang SC 英文字体：Source Serif Pro 字体回退机制：\n文章内容回退链条：Source Serif Pro → PingFang SC → Noto Serif CJK SC → Songti SC → 系统衬线体 界面元素回退链：Source Serif Pro → PingFang SC → 系统字体 → Segoe UI → Microsoft YaHei → 系统无衬线体 代码字体回退链：Maple Mono → PingFang SC → JetBrains Mono → Fira Code → Consolas → 系统等宽字体 实践步骤 1、放置字体文件：下载字体资源，将字体文件放入 my-blog/static/fonts/ 目录下。\n2、添加 CSS 规则：在 my-blog/assets/css/extended/fonts.css 文件中，添加以下内容：\n/* 声明自定义字体 */ @font-face { font-family: \"Source Serif Pro\"; src: url(\"/fonts/SourceSerifPro-Regular.otf\") format(\"opentype\"); font-weight: 400; font-style: normal; font-display: swap; } @font-face { font-family: \"Maple Mono\"; src: url(\"/fonts/MapleMonoNormalNL-Regular.ttf\") format(\"truetype\"); font-weight: 400; font-style: normal; font-display: swap; } @font-face { font-family: \"PingFang SC\"; src: url(\"/fonts/PingFangSC-Regular.otf\") format(\"opentype\"); font-weight: 400; font-style: normal; font-display: swap; } /* ============================== 全局字体变量（便于维护） ============================== */ :root { /* 文章内容：衬线体 */ --font-article: \"Source Serif Pro\", \"PingFang SC\", \"Noto Serif CJK SC\", \"Songti SC\", serif; /* 网站 UI：无衬线体 */ --font-ui: \"Source Serif Pro\", \"PingFang SC\", -apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Hiragino Sans GB\", \"Microsoft YaHei\", sans-serif; /* 代码：等宽字体 */ --font-code: \"Maple Mono\", \"PingFang SC\", \"JetBrains Mono\", \"Fira Code\", \"Consolas\", \"Courier New\", monospace; } /* ============================== 1. 网站其他 UI（菜单、页脚、侧边栏等） ============================== */ body, header, footer, .sidebar, .menu, .breadcrumbs, .post-meta { font-family: var(--font-ui) !important; } /* ============================== 2. 文章标题 \u0026 正文（使用衬线体） ============================== */ .post-content, .post-title, .post-header h1, .post-content h2, .post-content h3 { font-family: var(--font-article); } /* ============================== 3. 代码（行内 \u0026 块级） ============================== */ .post-content code, .post-content pre code, .post-content pre { font-family: var(--font-code); font-size: 0.95em; } 3、在 Hugo 中启用自定义 CSS：修改 my-blog/hugo.toml\n[params.assets] ... customCSS = [\"css/extended/fonts.css\"] 添加评论系统 启用 Github Discussions 进入博客仓库，例如本人的 wmjim/wmjim.github.io 。 点击 settings 选项卡。 在左侧菜单的 General 区域，向下找到 Features，勾选 Discussions 。 安装 Giscus App 点击 下载，授权安装到博客仓库。 获取配置 回到 Giscus 官网，在配置页面填写博客的仓库信息：\nRepository：本人 wmjim/wmjim.github.io Page ↔️ Discussions Mapping：本人选择 Discussion title contains page pathname Discussion Category：本人选择 Q\u0026A Features：本人选择 Enable reactions for the main post 和 Load the comments lazily Theme：本人选择 gruvbox_light 页面会自动生成一段配置代码。\n配置 Hugo 在创建 comments.html 文件：\ntouch layouts/partials/comments.html 将 Giscus 生成的配置信息，填入：\n\u003cscript src=\"https://giscus.app/client.js\" data-repo=\"wmjim/wmjim.github.io\" data-repo-id=\"R_kgDOQEhMWg\" data-category=\"Q\u0026A\" data-category-id=\"DIC_kwDOQEhMWs4CwxiD\" data-mapping=\"pathname\" data-strict=\"0\" data-reactions-enabled=\"1\" data-emit-metadata=\"0\" data-input-position=\"bottom\" data-theme=\"gruvbox_light\" data-lang=\"en\" data-loading=\"lazy\" crossorigin=\"anonymous\" async \u003e\u003c/script\u003e 打开本地 hugo.toml 文件，启用 giscus ：\n[params.giscus] enable = true # 添加这个开关 建议 最好不要在 hugo.toml 启用全局 comments，而是在文章 Front Matter 中启用 comments。\n为了方便后续的使用，可以将 comments: true 添加到 archetypes/default.md 中，这样后续就可以针对每个创建的单个文章选择是否启用 comments 。\n双栏浮动布局 确认主题是否支持 PaperMod 的文章页模板路径：themes/PaperMod/layouts/_default/single.html 。\n查看主题 single.html 文件是否存在，若存在，则继续。\n下面将覆盖该文件，创建自定义版本。\n创建自定义文章页模板 在项目中创建文章页模板：\ntouch layouts/_default/single.html 添加以下内容：\n{{- define \"main\" -}} {{- $toc := (and (not (eq .Params.toc false)) (.Site.Params.ShowToc)) -}} \u003cdiv class=\"three-column-layout\"\u003e {{ if $toc }} \u003caside class=\"toc-sidebar\"\u003e {{- partial \"toc.html\" . -}} \u003c/aside\u003e {{ end }} \u003cmain class=\"post-content-wrapper\"\u003e \u003carticle class=\"post-single\"\u003e \u003cheader class=\"post-header\"\u003e {{ partial \"breadcrumbs.html\" . }} \u003ch1 class=\"post-title entry-hint-parent\"\u003e {{ .Title }} {{- if .Draft }} \u003cspan class=\"entry-hint\" title=\"Draft\"\u003e \u003csvg xmlns=\"http://www.w3.org/2000/svg\" height=\"35\" viewBox=\"0 -960 960 960\" fill=\"currentColor\"\u003e \u003cpath d=\"M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z\" /\u003e \u003c/svg\u003e \u003c/span\u003e {{- end }} \u003c/h1\u003e {{- if .Description }} \u003cdiv class=\"post-description\"\u003e {{ .Description }} \u003c/div\u003e {{- end }} {{- if not (.Param \"hideMeta\") }} \u003cdiv class=\"post-meta\"\u003e {{- partial \"post_meta.html\" . -}} {{- partial \"translation_list.html\" . -}} {{- partial \"edit_post.html\" . -}} {{- partial \"post_canonical.html\" . -}} \u003c/div\u003e {{- end }} \u003c/header\u003e {{- $isHidden := (.Param \"cover.hiddenInSingle\") | default (.Param \"cover.hidden\") | default false }} {{- partial \"cover.html\" (dict \"cxt\" . \"IsSingle\" true \"isHidden\" $isHidden) }} {{- if .Content }} \u003cdiv class=\"post-content\"\u003e {{- if not (.Param \"disableAnchoredHeadings\") }} {{- partial \"anchored_headings.html\" .Content -}} {{- else }}{{ .Content }}{{ end }} \u003c/div\u003e {{- end }} \u003cfooter class=\"post-footer\"\u003e {{- $tags := .Language.Params.Taxonomies.tag | default \"tags\" }} \u003cul class=\"post-tags\"\u003e {{- range ($.GetTerms $tags) }} \u003cli\u003e\u003ca href=\"{{ .Permalink }}\"\u003e{{ .LinkTitle }}\u003c/a\u003e\u003c/li\u003e {{- end }} \u003c/ul\u003e {{- if (.Param \"ShowPostNavLinks\") }} {{- partial \"post_nav_links.html\" . }} {{- end }} {{- if (and site.Params.ShowShareButtons (ne .Params.disableShare true)) }} {{- partial \"share_icons.html\" . -}} {{- end }} \u003c/footer\u003e {{- if (.Param \"comments\") }} {{- partial \"comments.html\" . }} {{- end }} \u003c/article\u003e \u003c/main\u003e \u003caside class=\"recent-posts-sidebar\"\u003e \u003ch3\u003e最新文章\u003c/h3\u003e \u003cul\u003e {{ range first 5 (where site.RegularPages \"Type\" \"in\" site.Params.mainSections) }} \u003cli\u003e \u003ca href=\"{{ .RelPermalink }}\"\u003e{{ .Title }}\u003c/a\u003e \u003ctime datetime=\"{{ .Date.Format \"2006-01-02\" }}\"\u003e{{ .Date.Format \"2006-01-02\" }}\u003c/time\u003e \u003c/li\u003e {{ end }} \u003c/ul\u003e \u003c/aside\u003e \u003c/div\u003e {{- end -}} 添加自定义 CSS 创建自定义 CSS 文件：\ntouch assets/css/extended/three-columns.css 添加以下内容：\n/* 三栏布局：仅在桌面端生效 */ @media (min-width: 1300px) { /* 三栏网格布局 */ body:has(.three-column-layout) .main { max-width: 1500px !important; margin: 0 auto; } .three-column-layout { display: grid; grid-template-columns: 340px 1fr 280px; /* 左 240px | 中 自动 | 右 280px */ grid-template-rows: auto; /* 明确行高度 */ gap: 2rem; padding: 0 1rem; margin: 0 auto; align-items: start; /* 关键：防止拉伸 */ } /* 左侧目录栏 */ .three-column-layout .toc-sidebar { position: sticky; top: 1rem; height: fit-content; max-height: calc(100vh - 4rem); overflow: hidden; /* 容器不滚动，让内部滚动 */ font-size: 0.95em; border-radius: var(--radius); padding: 1rem; align-self: start; /* 确保从顶部开始 */ } /* 中间正文区域 */ .three-column-layout .post-content-wrapper { min-width: 0; /* 防止内容溢出 */ line-height: 1.7; font-size: 1.05em; color: var(--content); } /* 右侧最新文章栏 */ .three-column-layout .recent-posts-sidebar { height: fit-content; /* 高度适应内容 */ max-height: calc(100vh - 4rem); /* 最大高度限制 */ overflow-y: auto; /* 内容过多时滚动 */ position: sticky; top: 2rem; font-size: 0.95em; border: 1px solid var(--border); background: var(--code-bg); border-radius: var(--radius); padding: 1rem; align-self: start; /* 确保从顶部开始 */ } .three-column-layout .recent-posts-sidebar h3 { margin-top: 0; margin-bottom: 1rem; font-size: 1.1em; color: var(--primary); } .three-column-layout .recent-posts-sidebar ul { list-style: none; padding: 0; margin: 0; } .three-column-layout .recent-posts-sidebar li { margin-bottom: 0.75rem; padding-bottom: 0.5rem; border-bottom: 1px solid var(--border); } .three-column-layout .recent-posts-sidebar time { display: block; color: var(--secondary); font-size: 0.85em; margin-top: 0.25rem; } } /* 平板及以下：恢复单栏 */ @media (max-width: 1299px) { .three-column-layout { display: block; } .toc-sidebar, .recent-posts-sidebar { display: none; } } 启动自定义 CSS ... [params.assets] ... customCSS = [ \"css/extended/custom.css\", \"css/extended/three-columns.css\" ] ... 添加 LaTeX 数学公式支持 1、创建文件 katex.html ：\ntouch layouts/partials/katex.html 添加如下内容：\n\u003clink rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css\" crossorigin=\"anonymous\" /\u003e \u003cscript defer src=\"https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js\" crossorigin=\"anonymous\" \u003e\u003c/script\u003e \u003cscript defer src=\"https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js\" integrity=\"sha384-43gviWU0YVjaDtb/GSNGy30fttW31i3cM7K0wHN/M5v8C7R6Z7U7e+q3vJ7U7e+q3v\" crossorigin=\"anonymous\" onload=\"renderMathInElement(document.body);\"\u003e\u003c/script\u003e \u003cscript defer src=\"https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/auto-render.min.js\" crossorigin=\"anonymous\" \u003e\u003c/script\u003e \u003cscript\u003e document.addEventListener(\"DOMContentLoaded\", function () { if (typeof renderMathInElement === \"function\") { renderMathInElement(document.body, { delimiters: [ { left: \"$$\", right: \"$$\", display: true }, { left: \"$\", right: \"$\", display: false }, { left: \"\\\\[\", right: \"\\\\]\", display: true }, { left: \"\\\\(\", right: \"\\\\)\", display: false }, ], throwOnError: false, }); } }); \u003c/script\u003e 2、创建文件 baseof.html ：\ntouch layouts/_default/baseof.html 将主题的 themes/PaperMod/layouts/_default/baseof.html 文件内容复制到该文件，之后在 结束前添加：\n{{ if or .Params.math .Site.Params.enableMath }} {{ partial \"katex.html\" . }} {{ end }} 3、在文章 Front Matter 中启用 KaTex：\n+++ math: true +++ 添加 Mermaid 作图支持 1、创建 mermaid.html 文件：\ntouch layouts/partials/mermaid.html 添加如下内容：\n\u003clink rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/mermaid@latest/dist/mermaid.min.css\" /\u003e \u003cscript\u003e // 延迟初始化，确保 Hugo 内容已渲染 window.addEventListener(\"load\", function () { var script = document.createElement(\"script\"); script.src = \"https://cdn.jsdelivr.net/npm/mermaid@latest/dist/mermaid.min.js\"; script.onload = function () { mermaid.initialize({ startOnLoad: true, theme: \"dark\", securityLevel: \"loose\", }); // 手动触发渲染，确保所有图表都被处理 mermaid.init(undefined, \".language-mermaid\"); }; document.head.appendChild(script); }); \u003c/script\u003e 3、在 layouts/_default/baseof.html 中按需加载\n在 结束前添加：\n{{ if or .Params.mermaid .Site.Params.enableMermaid }} {{ partial \"mermaid.html\" . }} {{ end }} 4、在文章 Front Matter 中启用 Mermaid\n+++ mermaid = true +++ ",
  "wordCount" : "2519",
  "inLanguage": "zh",
  "datePublished": "2025-10-17T16:22:19+08:00",
  "dateModified": "2025-10-17T16:22:19+08:00",
  "author":{
    "@type": "Person",
    "name": "mengw"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/%E5%8D%9A%E5%AE%A2%E5%A4%87%E5%BF%98%E5%BD%95/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Mengw's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/images/avatar.jpg"
    }
  }
}
</script>
    
      
<link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"
    crossorigin="anonymous"
/>


<script
    defer
    src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"
    crossorigin="anonymous"
></script>


<script
    defer
    src="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/auto-render.min.js"
    crossorigin="anonymous"
></script>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        if (typeof renderMathInElement === "function") {
            renderMathInElement(document.body, {
                delimiters: [
                    { left: "$$", right: "$$", display: true },
                    { left: "$", right: "$", display: false },
                    { left: "\\[", right: "\\]", display: true },
                    { left: "\\(", right: "\\)", display: false },
                ],
                throwOnError: false,
            });
        }
    });
</script>

    
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Mengw&#39;s Blog (Alt + H)">
                <img src="http://localhost:1313/images/avatar.jpg" alt="" aria-label="logo"
                    height="35">Mengw&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="🏠 主页">
                    <span>🏠 主页</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/" title="📚 文章">
                    <span>📚 文章</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="⏱ 时间轴">
                    <span>⏱ 时间轴</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="🏷️ 标签">
                    <span>🏷️ 标签</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/categories/" title="🧩 分类">
                    <span>🧩 分类</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="🔎 搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔎 搜索</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="👤 关于">
                    <span>👤 关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"><div class="three-column-layout">
  
  
  <aside class="toc-sidebar"><div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%8a%9f%e8%83%bd%e6%b5%8b%e8%af%95" aria-label="功能测试">功能测试</a><ul>
                        
                <li>
                    <a href="#latex-%e6%b5%8b%e8%af%95" aria-label="LaTex 测试">LaTex 测试</a></li>
                <li>
                    <a href="#mermaid-%e6%b5%8b%e8%af%95" aria-label="Mermaid 测试">Mermaid 测试</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8d%9a%e5%ae%a2%e6%a1%86%e6%9e%b6" aria-label="博客框架">博客框架</a></li>
                <li>
                    <a href="#%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4" aria-label="常用命令">常用命令</a></li>
                <li>
                    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%ad%97%e4%bd%93" aria-label="自定义字体">自定义字体</a><ul>
                        
                <li>
                    <a href="#%e5%ad%97%e4%bd%93%e6%8e%a7%e5%88%b6%e7%ad%96%e7%95%a5" aria-label="字体控制策略">字体控制策略</a></li>
                <li>
                    <a href="#%e5%ae%9e%e8%b7%b5%e6%ad%a5%e9%aa%a4" aria-label="实践步骤">实践步骤</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%b7%bb%e5%8a%a0%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f" aria-label="添加评论系统">添加评论系统</a><ul>
                        
                <li>
                    <a href="#%e5%90%af%e7%94%a8-github-discussions" aria-label="启用 Github Discussions">启用 Github Discussions</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85-giscus-app" aria-label="安装 Giscus App">安装 Giscus App</a></li>
                <li>
                    <a href="#%e8%8e%b7%e5%8f%96%e9%85%8d%e7%bd%ae" aria-label="获取配置">获取配置</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae-hugo" aria-label="配置 Hugo">配置 Hugo</a></li>
                <li>
                    <a href="#%e5%bb%ba%e8%ae%ae" aria-label="建议">建议</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8f%8c%e6%a0%8f%e6%b5%ae%e5%8a%a8%e5%b8%83%e5%b1%80" aria-label="双栏浮动布局">双栏浮动布局</a><ul>
                        
                <li>
                    <a href="#%e7%a1%ae%e8%ae%a4%e4%b8%bb%e9%a2%98%e6%98%af%e5%90%a6%e6%94%af%e6%8c%81" aria-label="确认主题是否支持">确认主题是否支持</a></li>
                <li>
                    <a href="#%e5%88%9b%e5%bb%ba%e8%87%aa%e5%ae%9a%e4%b9%89%e6%96%87%e7%ab%a0%e9%a1%b5%e6%a8%a1%e6%9d%bf" aria-label="创建自定义文章页模板">创建自定义文章页模板</a></li>
                <li>
                    <a href="#%e6%b7%bb%e5%8a%a0%e8%87%aa%e5%ae%9a%e4%b9%89-css" aria-label="添加自定义 CSS">添加自定义 CSS</a></li>
                <li>
                    <a href="#%e5%90%af%e5%8a%a8%e8%87%aa%e5%ae%9a%e4%b9%89-css" aria-label="启动自定义 CSS">启动自定义 CSS</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%b7%bb%e5%8a%a0-latex-%e6%95%b0%e5%ad%a6%e5%85%ac%e5%bc%8f%e6%94%af%e6%8c%81" aria-label="添加 LaTeX 数学公式支持">添加 LaTeX 数学公式支持</a></li>
                <li>
                    <a href="#%e6%b7%bb%e5%8a%a0-mermaid-%e4%bd%9c%e5%9b%be%e6%94%af%e6%8c%81" aria-label="添加 Mermaid 作图支持">添加 Mermaid 作图支持</a>
                </li>
            </ul>
        </div>
    </details>
</div>
</aside>
  

  
  <main class="post-content-wrapper">
    
    <article class="post-single">
      <header class="post-header">
        <div class="breadcrumbs"><a href="http://localhost:1313/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
        <h1 class="post-title entry-hint-parent">
          博客备忘录
          <span class="entry-hint" title="Draft">
            <svg xmlns="http://www.w3.org/2000/svg" height="35" viewBox="0 -960 960 960" fill="currentColor">
              <path
                d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
            </svg>
          </span>
        </h1>
        <div class="post-meta"><span title='2025-10-17 16:22:19 +0800 CST'>2025年10月17日</span>&nbsp;·&nbsp;<span>6 分钟</span>&nbsp;·&nbsp;<span>mengw</span>&nbsp;|&nbsp;<span>
    <a href="https://github.com/wmjim/wmjim.github.io/edit/main/content/posts/%e5%8d%9a%e5%ae%a2%e5%a4%87%e5%bf%98%e5%bd%95.md" rel="noopener noreferrer edit" target="_blank">编辑此页</a>
</span>

</div>
      </header> 
      <div class="post-content"><ul>
<li><input checked="" disabled="" type="checkbox"> ：自定义字体</li>
<li><input checked="" disabled="" type="checkbox"> ：添加评论系统 - Giscus</li>
<li><input checked="" disabled="" type="checkbox"> ：双栏浮动布局</li>
<li><input checked="" disabled="" type="checkbox"> ：LaTeX 数学公式支持</li>
<li><input checked="" disabled="" type="checkbox"> ：Mermaid 作图支持</li>
</ul>
<p>这篇文章主要用来记录博客系统在使用过程中的一些必要记录的东西。</p>
<ul>
<li>核心框架：<a href="https://gohugo.io/">hugo</a></li>
<li>主题：<a href="https://github.com/adityatelange/hugo-PaperMod">PaperMod</a></li>
</ul>
<h2 id="功能测试">功能测试<a hidden class="anchor" aria-hidden="true" href="#功能测试">#</a></h2>
<h3 id="latex-测试">LaTex 测试<a hidden class="anchor" aria-hidden="true" href="#latex-测试">#</a></h3>
<p>行内公式：$E = mc^2$</p>
<p>块级公式：
$$
\int_a^b f(x),dx = F(b) - F(a)
$$</p>
<h3 id="mermaid-测试">Mermaid 测试<a hidden class="anchor" aria-hidden="true" href="#mermaid-测试">#</a></h3>
<pre tabindex="0"><code class="language-mermaid" data-lang="mermaid">flowchart TD
    A[Christmas] --&gt;|Get money| B(Go shopping)
    B --&gt; C{Let me think}
    C --&gt;|One| D[Laptop]
    C --&gt;|Two| E[iPhone]
    C --&gt;|Three| F[fa:fa-car Car]
</code></pre><h2 id="博客框架">博客框架<a hidden class="anchor" aria-hidden="true" href="#博客框架">#</a></h2>
<p>一个标准的 Hugo 项目包含以下目录：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>my-blog/
</span></span><span style="display:flex;"><span>|—— archetypes/   <span style="color:#6272a4"># 用于新内容的模板</span>
</span></span><span style="display:flex;"><span>|—— assets/       <span style="color:#6272a4"># 全局资源</span>
</span></span><span style="display:flex;"><span>|—— contents/     <span style="color:#6272a4"># 组成站点内容的md文件和页面资源</span>
</span></span><span style="display:flex;"><span>|—— data/         <span style="color:#6272a4"># 用于增强内容、配置、本地化和导航的数据文件</span>
</span></span><span style="display:flex;"><span>|—— i18n/         <span style="color:#6272a4"># 多语言站点的翻译表</span>
</span></span><span style="display:flex;"><span>|—— layouts/      <span style="color:#6272a4"># 自定义页面布局</span>
</span></span><span style="display:flex;"><span>|—— public/       <span style="color:#6272a4"># Hugo 构建输出的静态文件（部署用）</span>
</span></span><span style="display:flex;"><span>|—— resource/     <span style="color:#6272a4">#</span>
</span></span><span style="display:flex;"><span>|—— statics/      <span style="color:#6272a4"># 存放静态资源（图片、favicon、CSS）</span>
</span></span><span style="display:flex;"><span>|—— themes/       <span style="color:#6272a4"># 主题目录</span>
</span></span><span style="display:flex;"><span>|—— hugo.toml     <span style="color:#6272a4"># 站点配置文件</span>
</span></span></code></pre></div><ul>
<li><a href="https://hugo.opendocs.io/getting-started/directory-structure/#%e7%9b%ae%e5%bd%95">Hugo 项目骨架详释</a></li>
</ul>
<h2 id="常用命令">常用命令<a hidden class="anchor" aria-hidden="true" href="#常用命令">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 生成一篇新文章</span>
</span></span><span style="display:flex;"><span>hugo new posts/标题.md
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 启动 Hugo 的开发服务器以查看网站</span>
</span></span><span style="display:flex;"><span>hugo server -D
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># 构建站点，将文件发布到 public 目录</span>
</span></span><span style="display:flex;"><span>hugo
</span></span></code></pre></div><h2 id="自定义字体">自定义字体<a hidden class="anchor" aria-hidden="true" href="#自定义字体">#</a></h2>
<h3 id="字体控制策略">字体控制策略<a hidden class="anchor" aria-hidden="true" href="#字体控制策略">#</a></h3>
<ul>
<li><strong>文章正文与标题</strong>：
<ul>
<li>中文字体：<code>PingFang SC</code></li>
<li>英文字体：<code>Source Serif Pro</code></li>
</ul>
</li>
<li><strong>代码</strong>（行内 &amp; 块级）：
<ul>
<li>中文字体：<code>PingFang SC</code></li>
<li>英文字体：<code>Maple Mono</code></li>
</ul>
</li>
<li><strong>网站其它内容</strong>（导航、侧边栏等）：
<ul>
<li>中文字体：<code>PingFang SC</code></li>
<li>英文字体：<code>Source Serif Pro</code></li>
</ul>
</li>
</ul>
<p><strong>字体回退机制</strong>：</p>
<blockquote>
<ul>
<li>文章内容回退链条：<code>Source Serif Pro → PingFang SC → Noto Serif CJK SC → Songti SC → 系统衬线体</code></li>
<li>界面元素回退链：<code>Source Serif Pro → PingFang SC → 系统字体 → Segoe UI → Microsoft YaHei → 系统无衬线体</code></li>
<li>代码字体回退链：<code>Maple Mono → PingFang SC → JetBrains Mono → Fira Code → Consolas → 系统等宽字体</code></li>
</ul>
</blockquote>
<h3 id="实践步骤">实践步骤<a hidden class="anchor" aria-hidden="true" href="#实践步骤">#</a></h3>
<p>1、<strong>放置字体文件</strong>：下载字体资源，将字体文件放入 <code>my-blog/static/fonts/</code> 目录下。</p>
<p><img alt="本人选择的三种字体文件" loading="lazy" src="https://wmjia-1308526100.cos.ap-shanghai.myqcloud.com/20251017220807572.png"></p>
<p>2、<strong>添加 CSS 规则</strong>：在 <code>my-blog/assets/css/extended/fonts.css</code> 文件中，添加以下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#6272a4">/* 声明自定义字体 */</span>
</span></span><span style="display:flex;"><span>@<span style="color:#ff79c6">font-face</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Source Serif Pro&#34;</span><span style="color:#ff79c6">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">url</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;/fonts/SourceSerifPro-Regular.otf&#34;</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">format</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;opentype&#34;</span><span style="color:#ff79c6">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">400</span><span style="color:#ff79c6">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">font-style</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">normal</span><span style="color:#ff79c6">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">font-display</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">swap</span><span style="color:#ff79c6">;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@<span style="color:#ff79c6">font-face</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Maple Mono&#34;</span><span style="color:#ff79c6">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">url</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;/fonts/MapleMonoNormalNL-Regular.ttf&#34;</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">format</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;truetype&#34;</span><span style="color:#ff79c6">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">400</span><span style="color:#ff79c6">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">font-style</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">normal</span><span style="color:#ff79c6">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">font-display</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">swap</span><span style="color:#ff79c6">;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@<span style="color:#ff79c6">font-face</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;PingFang SC&#34;</span><span style="color:#ff79c6">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">url</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;/fonts/PingFangSC-Regular.otf&#34;</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">format</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;opentype&#34;</span><span style="color:#ff79c6">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">400</span><span style="color:#ff79c6">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">font-style</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">normal</span><span style="color:#ff79c6">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">font-display</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">swap</span><span style="color:#ff79c6">;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">/* ==============================
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">   全局字体变量（便于维护）
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">   ============================== */</span>
</span></span><span style="display:flex;"><span>:root {
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">/* 文章内容：衬线体 */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">--font-article</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f1fa8c">&#34;Source Serif Pro&#34;</span>, <span style="color:#f1fa8c">&#34;PingFang SC&#34;</span>, <span style="color:#f1fa8c">&#34;Noto Serif CJK SC&#34;</span>, <span style="color:#f1fa8c">&#34;Songti SC&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">serif</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">/* 网站 UI：无衬线体 */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">--font-ui</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f1fa8c">&#34;Source Serif Pro&#34;</span>, <span style="color:#f1fa8c">&#34;PingFang SC&#34;</span>, <span style="color:#ff79c6">-</span>apple-system, BlinkMacSystemFont,
</span></span><span style="display:flex;"><span>        <span style="color:#f1fa8c">&#34;Segoe UI&#34;</span>, <span style="color:#f1fa8c">&#34;Hiragino Sans GB&#34;</span>, <span style="color:#f1fa8c">&#34;Microsoft YaHei&#34;</span>, <span style="color:#ff79c6">sans-serif</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">/* 代码：等宽字体 */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">--font-code</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f1fa8c">&#34;Maple Mono&#34;</span>, <span style="color:#f1fa8c">&#34;PingFang SC&#34;</span>, <span style="color:#f1fa8c">&#34;JetBrains Mono&#34;</span>, <span style="color:#f1fa8c">&#34;Fira Code&#34;</span>, <span style="color:#f1fa8c">&#34;Consolas&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f1fa8c">&#34;Courier New&#34;</span>, <span style="color:#ff79c6">monospace</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">/* ==============================
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">   1. 网站其他 UI（菜单、页脚、侧边栏等）
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">   ============================== */</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">body</span><span style="color:#ff79c6">,</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">header</span><span style="color:#ff79c6">,</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">footer</span><span style="color:#ff79c6">,</span>
</span></span><span style="display:flex;"><span>.<span style="color:#50fa7b">sidebar</span><span style="color:#ff79c6">,</span>
</span></span><span style="display:flex;"><span>.<span style="color:#50fa7b">menu</span><span style="color:#ff79c6">,</span>
</span></span><span style="display:flex;"><span>.<span style="color:#50fa7b">breadcrumbs</span><span style="color:#ff79c6">,</span>
</span></span><span style="display:flex;"><span>.<span style="color:#50fa7b">post-meta</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">font-family</span>: <span style="color:#50fa7b">var</span>(<span style="color:#ff79c6">--</span>font<span style="color:#ff79c6">-</span>ui) <span style="color:#ff79c6">!important</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">/* ==============================
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">   2. 文章标题 &amp; 正文（使用衬线体）
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">   ============================== */</span>
</span></span><span style="display:flex;"><span>.<span style="color:#50fa7b">post-content</span><span style="color:#ff79c6">,</span>
</span></span><span style="display:flex;"><span>.<span style="color:#50fa7b">post-title</span><span style="color:#ff79c6">,</span>
</span></span><span style="display:flex;"><span>.<span style="color:#50fa7b">post-header</span> <span style="color:#ff79c6">h1</span><span style="color:#ff79c6">,</span>
</span></span><span style="display:flex;"><span>.<span style="color:#50fa7b">post-content</span> <span style="color:#ff79c6">h2</span><span style="color:#ff79c6">,</span>
</span></span><span style="display:flex;"><span>.<span style="color:#50fa7b">post-content</span> <span style="color:#ff79c6">h3</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">font-family</span>: <span style="color:#50fa7b">var</span>(<span style="color:#ff79c6">--</span>font<span style="color:#ff79c6">-</span>article);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">/* ==============================
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">   3. 代码（行内 &amp; 块级）
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">   ============================== */</span>
</span></span><span style="display:flex;"><span>.<span style="color:#50fa7b">post-content</span> <span style="color:#ff79c6">code</span><span style="color:#ff79c6">,</span>
</span></span><span style="display:flex;"><span>.<span style="color:#50fa7b">post-content</span> <span style="color:#ff79c6">pre</span> <span style="color:#ff79c6">code</span><span style="color:#ff79c6">,</span>
</span></span><span style="display:flex;"><span>.<span style="color:#50fa7b">post-content</span> <span style="color:#ff79c6">pre</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">font-family</span>: <span style="color:#50fa7b">var</span>(<span style="color:#ff79c6">--</span>font<span style="color:#ff79c6">-</span>code);
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">font-size</span>: <span style="color:#bd93f9">0.95</span><span style="color:#8be9fd">em</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>3、<strong>在 Hugo 中启用自定义 CSS</strong>：修改 <code>my-blog/hugo.toml</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[params.assets]
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    customCSS = [<span style="color:#f1fa8c">&#34;css/extended/fonts.css&#34;</span>]
</span></span></code></pre></div><h2 id="添加评论系统">添加评论系统<a hidden class="anchor" aria-hidden="true" href="#添加评论系统">#</a></h2>
<h3 id="启用-github-discussions">启用 Github Discussions<a hidden class="anchor" aria-hidden="true" href="#启用-github-discussions">#</a></h3>
<ul>
<li>进入博客仓库，例如本人的 <code>wmjim/wmjim.github.io</code> 。</li>
<li>点击 <code>settings</code> 选项卡。</li>
<li>在左侧菜单的 <code>General</code> 区域，向下找到 <code>Features</code>，勾选 <code>Discussions</code> 。</li>
</ul>
<h3 id="安装-giscus-app">安装 Giscus App<a hidden class="anchor" aria-hidden="true" href="#安装-giscus-app">#</a></h3>
<ul>
<li>点击 <a href="https://github.com/apps/giscus">下载</a>，授权安装到博客仓库。</li>
</ul>
<p><img loading="lazy" src="https://wmjia-1308526100.cos.ap-shanghai.myqcloud.com/20251018050617013.png"></p>
<h3 id="获取配置">获取配置<a hidden class="anchor" aria-hidden="true" href="#获取配置">#</a></h3>
<p>回到 <a href="https://giscus.app/">Giscus 官网</a>，在配置页面填写博客的仓库信息：</p>
<ul>
<li>Repository：本人 <code>wmjim/wmjim.github.io</code></li>
<li>Page ↔️ Discussions Mapping：本人选择 <code>Discussion title contains page pathname</code></li>
<li>Discussion Category：本人选择 <code>Q&amp;A</code></li>
<li>Features：本人选择 <code>Enable reactions for the main post</code> 和 <code>Load the comments lazily</code></li>
<li>Theme：本人选择 <code>gruvbox_light</code></li>
</ul>
<p>页面会自动生成一段配置代码。</p>
<h3 id="配置-hugo">配置 Hugo<a hidden class="anchor" aria-hidden="true" href="#配置-hugo">#</a></h3>
<p>在创建 <code>comments.html</code> 文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>touch layouts/partials/comments.html
</span></span></code></pre></div><p>将 <code>Giscus</code> 生成的配置信息，填入：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#ff79c6">script</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">src</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://giscus.app/client.js&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">data-repo</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;wmjim/wmjim.github.io&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">data-repo-id</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;R_kgDOQEhMWg&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">data-category</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Q&amp;A&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">data-category-id</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;DIC_kwDOQEhMWs4CwxiD&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">data-mapping</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;pathname&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">data-strict</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;0&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">data-reactions-enabled</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">data-emit-metadata</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;0&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">data-input-position</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;bottom&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">data-theme</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;gruvbox_light&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">data-lang</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;en&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">data-loading</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;lazy&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">crossorigin</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;anonymous&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">async</span>
</span></span><span style="display:flex;"><span>&gt;&lt;/<span style="color:#ff79c6">script</span>&gt;
</span></span></code></pre></div><p>打开本地 <code>hugo.toml</code> 文件，启用 giscus ：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[params.giscus]
</span></span><span style="display:flex;"><span>    enable = <span style="color:#ff79c6">true</span>  <span style="color:#6272a4"># 添加这个开关</span>
</span></span></code></pre></div><h3 id="建议">建议<a hidden class="anchor" aria-hidden="true" href="#建议">#</a></h3>
<p>最好不要在 <code>hugo.toml</code> 启用全局 <code>comments</code>，而是在文章 Front Matter 中启用 comments。</p>
<p>为了方便后续的使用，可以将 <code>comments: true</code> 添加到 <code>archetypes/default.md</code> 中，这样后续就可以针对每个创建的单个文章选择是否启用 <code>comments</code> 。</p>
<h2 id="双栏浮动布局">双栏浮动布局<a hidden class="anchor" aria-hidden="true" href="#双栏浮动布局">#</a></h2>
<h3 id="确认主题是否支持">确认主题是否支持<a hidden class="anchor" aria-hidden="true" href="#确认主题是否支持">#</a></h3>
<p>PaperMod 的文章页模板路径：<code>themes/PaperMod/layouts/_default/single.html</code> 。</p>
<p>查看主题 <code>single.html</code> 文件是否存在，若存在，则继续。</p>
<p>下面将覆盖该文件，创建自定义版本。</p>
<h3 id="创建自定义文章页模板">创建自定义文章页模板<a hidden class="anchor" aria-hidden="true" href="#创建自定义文章页模板">#</a></h3>
<p>在项目中创建文章页模板：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>touch layouts/_default/single.html
</span></span></code></pre></div><p>添加以下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{- define &#34;main&#34; -}}
</span></span><span style="display:flex;"><span>{{- $toc := (and (not (eq .Params.toc false)) (.Site.Params.ShowToc)) -}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ff79c6">div</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;three-column-layout&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#6272a4">&lt;!-- 左侧：目录 --&gt;</span>
</span></span><span style="display:flex;"><span>  {{ if $toc }}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#ff79c6">aside</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;toc-sidebar&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    {{- partial &#34;toc.html&#34; . -}}
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#ff79c6">aside</span>&gt;
</span></span><span style="display:flex;"><span>  {{ end }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#6272a4">&lt;!-- 中间：文章正文 --&gt;</span>
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#ff79c6">main</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;post-content-wrapper&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">&lt;!-- 使用 PaperMod 主题的文章内容结构 --&gt;</span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#ff79c6">article</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;post-single&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#ff79c6">header</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;post-header&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        {{ partial &#34;breadcrumbs.html&#34; . }}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#ff79c6">h1</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;post-title entry-hint-parent&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          {{ .Title }}
</span></span><span style="display:flex;"><span>          {{- if .Draft }}
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#ff79c6">span</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;entry-hint&#34;</span> <span style="color:#50fa7b">title</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Draft&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#ff79c6">svg</span> <span style="color:#50fa7b">xmlns</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;http://www.w3.org/2000/svg&#34;</span> <span style="color:#50fa7b">height</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;35&#34;</span> <span style="color:#50fa7b">viewBox</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;0 -960 960 960&#34;</span> <span style="color:#50fa7b">fill</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;currentColor&#34;</span>&gt;
</span></span><span style="display:flex;"><span>              &lt;<span style="color:#ff79c6">path</span>
</span></span><span style="display:flex;"><span>                <span style="color:#50fa7b">d</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#ff79c6">svg</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;/<span style="color:#ff79c6">span</span>&gt;
</span></span><span style="display:flex;"><span>          {{- end }}
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#ff79c6">h1</span>&gt;
</span></span><span style="display:flex;"><span>        {{- if .Description }}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#ff79c6">div</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;post-description&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          {{ .Description }}
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#ff79c6">div</span>&gt;
</span></span><span style="display:flex;"><span>        {{- end }}
</span></span><span style="display:flex;"><span>        {{- if not (.Param &#34;hideMeta&#34;) }}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#ff79c6">div</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;post-meta&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          {{- partial &#34;post_meta.html&#34; . -}}
</span></span><span style="display:flex;"><span>          {{- partial &#34;translation_list.html&#34; . -}}
</span></span><span style="display:flex;"><span>          {{- partial &#34;edit_post.html&#34; . -}}
</span></span><span style="display:flex;"><span>          {{- partial &#34;post_canonical.html&#34; . -}}
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#ff79c6">div</span>&gt;
</span></span><span style="display:flex;"><span>        {{- end }}
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#ff79c6">header</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      {{- $isHidden := (.Param &#34;cover.hiddenInSingle&#34;) | default (.Param &#34;cover.hidden&#34;) | default false }}
</span></span><span style="display:flex;"><span>      {{- partial &#34;cover.html&#34; (dict &#34;cxt&#34; . &#34;IsSingle&#34; true &#34;isHidden&#34; $isHidden) }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      {{- if .Content }}
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#ff79c6">div</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;post-content&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        {{- if not (.Param &#34;disableAnchoredHeadings&#34;) }}
</span></span><span style="display:flex;"><span>        {{- partial &#34;anchored_headings.html&#34; .Content -}}
</span></span><span style="display:flex;"><span>        {{- else }}{{ .Content }}{{ end }}
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#ff79c6">div</span>&gt;
</span></span><span style="display:flex;"><span>      {{- end }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#ff79c6">footer</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;post-footer&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        {{- $tags := .Language.Params.Taxonomies.tag | default &#34;tags&#34; }}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#ff79c6">ul</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;post-tags&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          {{- range ($.GetTerms $tags) }}
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#ff79c6">li</span>&gt;&lt;<span style="color:#ff79c6">a</span> <span style="color:#50fa7b">href</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;{{ .Permalink }}&#34;</span>&gt;{{ .LinkTitle }}&lt;/<span style="color:#ff79c6">a</span>&gt;&lt;/<span style="color:#ff79c6">li</span>&gt;
</span></span><span style="display:flex;"><span>          {{- end }}
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#ff79c6">ul</span>&gt;
</span></span><span style="display:flex;"><span>        {{- if (.Param &#34;ShowPostNavLinks&#34;) }}
</span></span><span style="display:flex;"><span>        {{- partial &#34;post_nav_links.html&#34; . }}
</span></span><span style="display:flex;"><span>        {{- end }}
</span></span><span style="display:flex;"><span>        {{- if (and site.Params.ShowShareButtons (ne .Params.disableShare true)) }}
</span></span><span style="display:flex;"><span>        {{- partial &#34;share_icons.html&#34; . -}}
</span></span><span style="display:flex;"><span>        {{- end }}
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#ff79c6">footer</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      {{- if (.Param &#34;comments&#34;) }}
</span></span><span style="display:flex;"><span>      {{- partial &#34;comments.html&#34; . }}
</span></span><span style="display:flex;"><span>      {{- end }}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#ff79c6">article</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#ff79c6">main</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#6272a4">&lt;!-- 右侧：最新文章 --&gt;</span>
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#ff79c6">aside</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;recent-posts-sidebar&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#ff79c6">h3</span>&gt;最新文章&lt;/<span style="color:#ff79c6">h3</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#ff79c6">ul</span>&gt;
</span></span><span style="display:flex;"><span>      {{ range first 5 (where site.RegularPages &#34;Type&#34; &#34;in&#34; site.Params.mainSections) }}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#ff79c6">li</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#ff79c6">a</span> <span style="color:#50fa7b">href</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;{{ .RelPermalink }}&#34;</span>&gt;{{ .Title }}&lt;/<span style="color:#ff79c6">a</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#ff79c6">time</span> <span style="color:#50fa7b">datetime</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;{{ .Date.Format &#34;</span><span style="color:#50fa7b">2006-01-02</span>&#34; }}&#34;&gt;{{ .Date.Format &#34;2006-01-02&#34; }}&lt;/<span style="color:#ff79c6">time</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#ff79c6">li</span>&gt;
</span></span><span style="display:flex;"><span>      {{ end }}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#ff79c6">ul</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#ff79c6">aside</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#ff79c6">div</span>&gt;
</span></span><span style="display:flex;"><span>{{- end -}}
</span></span></code></pre></div><h3 id="添加自定义-css">添加自定义 CSS<a hidden class="anchor" aria-hidden="true" href="#添加自定义-css">#</a></h3>
<p>创建自定义 CSS 文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>touch assets/css/extended/three-columns.css
</span></span></code></pre></div><p>添加以下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#6272a4">/* 三栏布局：仅在桌面端生效 */</span>
</span></span><span style="display:flex;"><span>@<span style="color:#ff79c6">media</span> <span style="color:#ff79c6">(</span><span style="color:#ff79c6">min-width</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">1300px</span><span style="color:#ff79c6">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">/* 三栏网格布局 */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">body</span>:has<span style="color:#ff79c6">(</span>.<span style="color:#50fa7b">three-column-layout</span><span style="color:#ff79c6">)</span> .<span style="color:#50fa7b">main</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">max-width</span>: <span style="color:#bd93f9">1500</span><span style="color:#8be9fd">px</span> <span style="color:#ff79c6">!important</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">margin</span>: <span style="color:#bd93f9">0</span> <span style="color:#ff79c6">auto</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    .<span style="color:#50fa7b">three-column-layout</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">display</span>: <span style="color:#ff79c6">grid</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">grid-template-columns</span>: <span style="color:#bd93f9">340</span><span style="color:#8be9fd">px</span> <span style="color:#bd93f9">1</span>fr <span style="color:#bd93f9">280</span><span style="color:#8be9fd">px</span>; <span style="color:#6272a4">/* 左 240px | 中 自动 | 右 280px */</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">grid-template-rows</span>: <span style="color:#ff79c6">auto</span>; <span style="color:#6272a4">/* 明确行高度 */</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">gap</span>: <span style="color:#bd93f9">2</span><span style="color:#8be9fd">rem</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">padding</span>: <span style="color:#bd93f9">0</span> <span style="color:#bd93f9">1</span><span style="color:#8be9fd">rem</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">margin</span>: <span style="color:#bd93f9">0</span> <span style="color:#ff79c6">auto</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">align-items</span>: <span style="color:#ff79c6">start</span>; <span style="color:#6272a4">/* 关键：防止拉伸 */</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">/* 左侧目录栏 */</span>
</span></span><span style="display:flex;"><span>    .<span style="color:#50fa7b">three-column-layout</span> .<span style="color:#50fa7b">toc-sidebar</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">position</span>: <span style="color:#ff79c6">sticky</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">top</span>: <span style="color:#bd93f9">1</span><span style="color:#8be9fd">rem</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">height</span>: fit-content;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">max-height</span>: <span style="color:#8be9fd;font-style:italic">calc</span>(<span style="color:#bd93f9">100</span><span style="color:#8be9fd">vh</span> <span style="color:#ff79c6">-</span> <span style="color:#bd93f9">4</span><span style="color:#8be9fd">rem</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">overflow</span>: <span style="color:#ff79c6">hidden</span>; <span style="color:#6272a4">/* 容器不滚动，让内部滚动 */</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">font-size</span>: <span style="color:#bd93f9">0.95</span><span style="color:#8be9fd">em</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">border-radius</span>: <span style="color:#50fa7b">var</span>(<span style="color:#ff79c6">--</span>radius);
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">padding</span>: <span style="color:#bd93f9">1</span><span style="color:#8be9fd">rem</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">align-self</span>: <span style="color:#ff79c6">start</span>; <span style="color:#6272a4">/* 确保从顶部开始 */</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">/* 中间正文区域 */</span>
</span></span><span style="display:flex;"><span>    .<span style="color:#50fa7b">three-column-layout</span> .<span style="color:#50fa7b">post-content-wrapper</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">min-width</span>: <span style="color:#bd93f9">0</span>; <span style="color:#6272a4">/* 防止内容溢出 */</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">line-height</span>: <span style="color:#bd93f9">1.7</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">font-size</span>: <span style="color:#bd93f9">1.05</span><span style="color:#8be9fd">em</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">color</span>: <span style="color:#50fa7b">var</span>(<span style="color:#ff79c6">--</span>content);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">/* 右侧最新文章栏 */</span>
</span></span><span style="display:flex;"><span>    .<span style="color:#50fa7b">three-column-layout</span> .<span style="color:#50fa7b">recent-posts-sidebar</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">height</span>: fit-content; <span style="color:#6272a4">/* 高度适应内容 */</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">max-height</span>: <span style="color:#8be9fd;font-style:italic">calc</span>(<span style="color:#bd93f9">100</span><span style="color:#8be9fd">vh</span> <span style="color:#ff79c6">-</span> <span style="color:#bd93f9">4</span><span style="color:#8be9fd">rem</span>); <span style="color:#6272a4">/* 最大高度限制 */</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">overflow-y</span>: <span style="color:#ff79c6">auto</span>; <span style="color:#6272a4">/* 内容过多时滚动 */</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">position</span>: <span style="color:#ff79c6">sticky</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">top</span>: <span style="color:#bd93f9">2</span><span style="color:#8be9fd">rem</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">font-size</span>: <span style="color:#bd93f9">0.95</span><span style="color:#8be9fd">em</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">border</span>: <span style="color:#bd93f9">1</span><span style="color:#8be9fd">px</span> <span style="color:#ff79c6">solid</span> <span style="color:#50fa7b">var</span>(<span style="color:#ff79c6">--</span>border);
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">background</span>: <span style="color:#50fa7b">var</span>(<span style="color:#ff79c6">--</span>code<span style="color:#ff79c6">-</span>bg);
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">border-radius</span>: <span style="color:#50fa7b">var</span>(<span style="color:#ff79c6">--</span>radius);
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">padding</span>: <span style="color:#bd93f9">1</span><span style="color:#8be9fd">rem</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">align-self</span>: <span style="color:#ff79c6">start</span>; <span style="color:#6272a4">/* 确保从顶部开始 */</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    .<span style="color:#50fa7b">three-column-layout</span> .<span style="color:#50fa7b">recent-posts-sidebar</span> <span style="color:#ff79c6">h3</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">margin-top</span>: <span style="color:#bd93f9">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">margin-bottom</span>: <span style="color:#bd93f9">1</span><span style="color:#8be9fd">rem</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">font-size</span>: <span style="color:#bd93f9">1.1</span><span style="color:#8be9fd">em</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">color</span>: <span style="color:#50fa7b">var</span>(<span style="color:#ff79c6">--</span>primary);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    .<span style="color:#50fa7b">three-column-layout</span> .<span style="color:#50fa7b">recent-posts-sidebar</span> <span style="color:#ff79c6">ul</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">list-style</span>: <span style="color:#ff79c6">none</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">padding</span>: <span style="color:#bd93f9">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">margin</span>: <span style="color:#bd93f9">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    .<span style="color:#50fa7b">three-column-layout</span> .<span style="color:#50fa7b">recent-posts-sidebar</span> <span style="color:#ff79c6">li</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">margin-bottom</span>: <span style="color:#bd93f9">0.75</span><span style="color:#8be9fd">rem</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">padding-bottom</span>: <span style="color:#bd93f9">0.5</span><span style="color:#8be9fd">rem</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">border-bottom</span>: <span style="color:#bd93f9">1</span><span style="color:#8be9fd">px</span> <span style="color:#ff79c6">solid</span> <span style="color:#50fa7b">var</span>(<span style="color:#ff79c6">--</span>border);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    .<span style="color:#50fa7b">three-column-layout</span> .<span style="color:#50fa7b">recent-posts-sidebar</span> <span style="color:#ff79c6">time</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">display</span>: <span style="color:#ff79c6">block</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">color</span>: <span style="color:#50fa7b">var</span>(<span style="color:#ff79c6">--</span>secondary);
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">font-size</span>: <span style="color:#bd93f9">0.85</span><span style="color:#8be9fd">em</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">margin-top</span>: <span style="color:#bd93f9">0.25</span><span style="color:#8be9fd">rem</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">/* 平板及以下：恢复单栏 */</span>
</span></span><span style="display:flex;"><span>@<span style="color:#ff79c6">media</span> <span style="color:#ff79c6">(</span><span style="color:#ff79c6">max-width</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">1299px</span><span style="color:#ff79c6">)</span> {
</span></span><span style="display:flex;"><span>    .<span style="color:#50fa7b">three-column-layout</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">display</span>: <span style="color:#ff79c6">block</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    .<span style="color:#50fa7b">toc-sidebar</span><span style="color:#ff79c6">,</span>
</span></span><span style="display:flex;"><span>    .<span style="color:#50fa7b">recent-posts-sidebar</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">display</span>: <span style="color:#ff79c6">none</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="启动自定义-css">启动自定义 CSS<a hidden class="anchor" aria-hidden="true" href="#启动自定义-css">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>[params.assets]
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    customCSS = [   <span style="color:#f1fa8c">&#34;css/extended/custom.css&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#f1fa8c">&#34;css/extended/three-columns.css&#34;</span>
</span></span><span style="display:flex;"><span>                ]
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><h2 id="添加-latex-数学公式支持">添加 LaTeX 数学公式支持<a hidden class="anchor" aria-hidden="true" href="#添加-latex-数学公式支持">#</a></h2>
<p>1、创建文件 <code>katex.html</code> ：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>touch layouts/partials/katex.html
</span></span></code></pre></div><p>添加如下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#6272a4">&lt;!-- KaTeX CSS --&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ff79c6">link</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">rel</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;stylesheet&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">href</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">crossorigin</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;anonymous&#34;</span>
</span></span><span style="display:flex;"><span>/&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">&lt;!-- KaTeX JS --&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ff79c6">script</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">defer</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">src</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">crossorigin</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;anonymous&#34;</span>
</span></span><span style="display:flex;"><span>&gt;&lt;/<span style="color:#ff79c6">script</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">&lt;!-- auto-render 插件（自动渲染 $...$ 和 $$...$$） --&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ff79c6">script</span> <span style="color:#50fa7b">defer</span> <span style="color:#50fa7b">src</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#50fa7b">integrity</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;sha384-43gviWU0YVjaDtb/GSNGy30fttW31i3cM7K0wHN/M5v8C7R6Z7U7e+q3vJ7U7e+q3v&#34;</span> <span style="color:#50fa7b">crossorigin</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;anonymous&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#50fa7b">onload</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;renderMathInElement(document.body);&#34;</span>&gt;&lt;/<span style="color:#ff79c6">script</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#6272a4">&lt;!-- Auto-render extension --&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ff79c6">script</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">defer</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">src</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/auto-render.min.js&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">crossorigin</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;anonymous&#34;</span>
</span></span><span style="display:flex;"><span>&gt;&lt;/<span style="color:#ff79c6">script</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">&lt;!-- 手动触发渲染 --&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ff79c6">script</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">document</span>.addEventListener(<span style="color:#f1fa8c">&#34;DOMContentLoaded&#34;</span>, <span style="color:#8be9fd;font-style:italic">function</span> () {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> (<span style="color:#ff79c6">typeof</span> renderMathInElement <span style="color:#ff79c6">===</span> <span style="color:#f1fa8c">&#34;function&#34;</span>) {
</span></span><span style="display:flex;"><span>            renderMathInElement(<span style="color:#8be9fd;font-style:italic">document</span>.body, {
</span></span><span style="display:flex;"><span>                delimiters<span style="color:#ff79c6">:</span> [
</span></span><span style="display:flex;"><span>                    { left<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;$$&#34;</span>, right<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;$$&#34;</span>, display<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">true</span> },
</span></span><span style="display:flex;"><span>                    { left<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;$&#34;</span>, right<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;$&#34;</span>, display<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">false</span> },
</span></span><span style="display:flex;"><span>                    { left<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;\\[&#34;</span>, right<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;\\]&#34;</span>, display<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">true</span> },
</span></span><span style="display:flex;"><span>                    { left<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;\\(&#34;</span>, right<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;\\)&#34;</span>, display<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">false</span> },
</span></span><span style="display:flex;"><span>                ],
</span></span><span style="display:flex;"><span>                throwOnError<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#ff79c6">script</span>&gt;
</span></span></code></pre></div><p>2、创建文件 <code>baseof.html</code> ：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>touch layouts/_default/baseof.html
</span></span></code></pre></div><p>将主题的 <code>themes/PaperMod/layouts/_default/baseof.html</code> 文件内容复制到该文件，之后在 <code>&lt;head&gt;</code> 结束前添加：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{ if or .Params.math .Site.Params.enableMath }}
</span></span><span style="display:flex;"><span>  {{ partial &#34;katex.html&#34; . }}
</span></span><span style="display:flex;"><span>{{ end }}
</span></span></code></pre></div><p>3、在文章 Front Matter 中启用 KaTex：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>+++
</span></span><span style="display:flex;"><span>math: <span style="color:#ff79c6">true</span>
</span></span><span style="display:flex;"><span>+++
</span></span></code></pre></div><h2 id="添加-mermaid-作图支持">添加 Mermaid 作图支持<a hidden class="anchor" aria-hidden="true" href="#添加-mermaid-作图支持">#</a></h2>
<p>1、创建 <code>mermaid.html</code> 文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>touch layouts/partials/mermaid.html
</span></span></code></pre></div><p>添加如下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#6272a4">&lt;!-- Mermaid CSS --&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ff79c6">link</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">rel</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;stylesheet&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#50fa7b">href</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://cdn.jsdelivr.net/npm/mermaid@latest/dist/mermaid.min.css&#34;</span>
</span></span><span style="display:flex;"><span>/&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">&lt;!-- Mermaid JS --&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ff79c6">script</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">// 延迟初始化，确保 Hugo 内容已渲染
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    <span style="color:#8be9fd;font-style:italic">window</span>.addEventListener(<span style="color:#f1fa8c">&#34;load&#34;</span>, <span style="color:#8be9fd;font-style:italic">function</span> () {
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">var</span> script <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">document</span>.createElement(<span style="color:#f1fa8c">&#34;script&#34;</span>);
</span></span><span style="display:flex;"><span>        script.src <span style="color:#ff79c6">=</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f1fa8c">&#34;https://cdn.jsdelivr.net/npm/mermaid@latest/dist/mermaid.min.js&#34;</span>;
</span></span><span style="display:flex;"><span>        script.onload <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span> () {
</span></span><span style="display:flex;"><span>            mermaid.initialize({
</span></span><span style="display:flex;"><span>                startOnLoad<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">true</span>,
</span></span><span style="display:flex;"><span>                theme<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;dark&#34;</span>,
</span></span><span style="display:flex;"><span>                securityLevel<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;loose&#34;</span>,
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            <span style="color:#6272a4">// 手动触发渲染，确保所有图表都被处理
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>            mermaid.init(<span style="color:#ff79c6">undefined</span>, <span style="color:#f1fa8c">&#34;.language-mermaid&#34;</span>);
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">document</span>.head.appendChild(script);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#ff79c6">script</span>&gt;
</span></span></code></pre></div><p>3、<strong>在 <code>layouts/_default/baseof.html</code> 中按需加载</strong></p>
<p>在 <code>&lt;body&gt;</code> 结束前添加：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{ if or .Params.mermaid .Site.Params.enableMermaid }}
</span></span><span style="display:flex;"><span>  {{ partial &#34;mermaid.html&#34; . }}
</span></span><span style="display:flex;"><span>{{ end }}
</span></span></code></pre></div><p>4、<strong>在文章 Front Matter 中启用 Mermaid</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-md" data-lang="md"><span style="display:flex;"><span>+++
</span></span><span style="display:flex;"><span>mermaid = true
</span></span><span style="display:flex;"><span>+++
</span></span></code></pre></div>

      </div>

      <footer class="post-footer">
        <ul class="post-tags">
          <li><a href="http://localhost:1313/tags/hugo/">Hugo</a></li>
          <li><a href="http://localhost:1313/tags/mermaid/">Mermaid</a></li>
          <li><a href="http://localhost:1313/tags/katex/">KaTeX</a></li>
          <li><a href="http://localhost:1313/tags/giscus/">Giscus</a></li>
          <li><a href="http://localhost:1313/tags/papermod/">PaperMod</a></li>
        </ul>

      </footer><script
    src="https://giscus.app/client.js"
    data-repo="wmjim/wmjim.github.io"
    data-repo-id="R_kgDOQEhMWg"
    data-category="Q&A"
    data-category-id="DIC_kwDOQEhMWs4CwxiD"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="gruvbox_light"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    async
></script>

    </article>
  </main>

  
  <aside class="recent-posts-sidebar">
    <h3>最新文章</h3>
    <ul>
      
        <li>
          <a href="/posts/%E5%8D%9A%E5%AE%A2%E5%A4%87%E5%BF%98%E5%BD%95/">博客备忘录</a>
          <time datetime="2025-10-17">2025-10-17</time>
        </li>
      
    </ul>
  </aside>
</div>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Mengw&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

      
<link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/mermaid@latest/dist/mermaid.min.css"
/>

<style>
  .post-content .mermaid {
    display: flex !important;
    justify-content: center !important;
    margin: 1.5em auto !important;
    width: 100% !important;
  }
  .post-content .mermaid svg {
    display: block !important;
    margin: auto !important;
    max-width: 100% !important;
  }
</style>



<script>
    
    window.addEventListener("load", function () {
        var script = document.createElement("script");
        script.src =
            "https://cdn.jsdelivr.net/npm/mermaid@latest/dist/mermaid.min.js";
        script.onload = function () {
            mermaid.initialize({
                startOnLoad: false,
                theme: "dark",
                securityLevel: "loose",
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                themeVariables: {
                    fontFamily: "var(--font-article)",
                    fontSize: '14px',
                }
            });
            
            document.querySelectorAll(".language-mermaid").forEach(function(el) {
                const parent = el.parentElement;
                const code = el.textContent;
                parent.outerHTML = `<div class="mermaid">${code}</div>`;
            });

            
            mermaid.init(undefined, document.querySelectorAll(".mermaid"));
        };
        document.head.appendChild(script);
    });
</script>

    
</body>
</html>
